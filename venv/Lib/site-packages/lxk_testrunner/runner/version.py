"""
lxk_testrunner Version Checker
"""

import logging
from lxk_testrunner import INTERNAL_INDEX
from lxk_testrunner.utils import pip

LOGGER = logging.getLogger(__name__)
LOGGER.setLevel(logging.DEBUG)

def check_outdated():
    """
    Compare installed and latest lxk_testrunner package version.
    """
    installed_version = pip.check_installed_package_version(
        name="lxk_testrunner"
    )
    latest_version = pip.check_latest_package_version(
        name="lxk_testrunner",
        index=INTERNAL_INDEX
    )
    LOGGER.debug(installed_version)
    LOGGER.debug(latest_version)
    if installed_version != latest_version:
        LOGGER.warning(
            "WARNING: "
            "Your version of %s is %s (latest version is %s).",
            "lxk_testrunner", installed_version, latest_version
        )

    return installed_version != latest_version

def update(install_globally):
    """
    Update lxk_testrunner only
    """
    options = ["--no-deps"]

    if not install_globally:
        options.append("--user")

    success = pip.upgrade(
        extra_index=INTERNAL_INDEX,
        name="lxk_testrunner",
        options=options
    )
    return success
