"""
File Module
==========

Performs file related functions used for testing.
Generally, all functions in this module does not have
the same or is not have direct relation to the available
keywords in Robot Library "Operating System".
"""

import logging
from lxk_testlib.utils import download
import os
from lxk_testlib.utils import socket

LOGGER = logging.getLogger(__name__)
LOGGER.setLevel(logging.DEBUG)

def download_from_url(url, dest_folder):
    """
    Downloads file from and save it to local destination folder.
    Function uses urlretrieve to download the file from url and
    save to destination folder.

    :Parameters:
        1. url         = full url of the location where to download the file
        2. dest_folder = full path of the destination folder where to
                         save the downloaded file

    : Returns: (boolean)
    """
    return download.get_file(url, dest_folder)

def send_using_tcp(ip_address, file, wait_for_timeout=True, timeout=120):
    """
    Get settings value of the printer using NPA ID.

    :Parameters:

        1. ip_address, ``<class 'str'>``
        2. file, ``<class 'str'>``, npa file containing an npa command

    :Returns: ``<class 'str'>``
    """
    
    if not os.path.exists(file):
        assert False, "Could not find " + file + "!!!"
        
    if os.path.getsize(file) < 5 * 10**6 :
        wait_for_timeout = False

    result = socket.send(ip_address, file, wait_for_timeout, timeout, 9100)
    return result