"""
USB
---
"""

import os
import logging
from lxk_testlib import rob
from lxk_testlib.utils import ssh

LOGGER = logging.getLogger(__name__)
LOGGER.setLevel(logging.DEBUG)

def configure_thumb_drive(ip_address, value):
    """
    PlugIn/Unplug Thumbdrive through rob call.

    :Parameters:

        1. ip_address, ``<class 'str'>``
        2. value, ``<class 'str'>``, [connect, disconnect]

    :Returns: ``None``
    """
    LOGGER.debug(ip_address)
    LOGGER.debug(value)
    cmd = "ssh -o StrictHostKeyChecking=no -l root %s \"mkdir -p /var/thumb\"" % (ip_address)
    returnoutput = ssh.execute(ip_address, cmd)
    cmd = "ssh -o StrictHostKeyChecking=no -l root %s \"chmod 777 /var/thumb\"" % (ip_address)
    returnoutput = ssh.execute(ip_address, cmd)
    cmd = '''sendevent USBHost connect '{siis}' event_type ''' + value + \
    ''' dev_type 0x15 unsupp_conn 0 mount_name '/var/thumb' '''
    LOGGER.debug(cmd)
    return_output = rob.execute(ip_address, cmd)
    LOGGER.debug(return_output)
    if "rc = PROXY_OK" in return_output[1]:
        LOGGER.info("%s to USB thumb drive", value)
    else:
        assert False, 'ERROR: Configuring USB thumb drive, {}'.format(value)
    cmd = "mkdir -p /var/thumb"
    LOGGER.debug(cmd)
    return_output = ssh.execute(ip_address, cmd)
    LOGGER.debug(return_output)
