"""
Webglue
-------
"""

import logging
from lxk_printer_device.ews import ews

LOGGER = logging.getLogger(__name__)
LOGGER.setLevel(logging.DEBUG)

def get_setting(ip_address, setting):
    """
    Get Setting value using the EWS webglue.
    'Setting' value can be found when inspecting the EWS html
    and get the id of the setting.

    :Parameters:

        1. ip_address, ``<class 'str'>``
        2. setting, ``<class 'str'>`` (i.e. ScreenTimeout, SetHostname and TcpIpDomainName.)

    :Returns: ``<class 'int'>`` or ``<class 'str'>``
    """
    LOGGER.debug(ip_address)
    LOGGER.debug(setting)

    data = ews.get_content(
        ip_address,
        "/webglue/content?c={}".format(setting),
        attempts=3
    )
    retval = int(data['nodes']['settings'][str(data['nodes']['nodes'] \
    [setting]['setting'])]['val'])
    LOGGER.debug(retval)
    return retval
